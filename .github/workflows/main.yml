name: Run my Flask Application

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Set up SSH and run a Script
        env:
          PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
          HOST_NAME: ${{ secrets.HOST_IP_ADDR }}
          USER_NAME: ${{ secrets.USER_NAME }}

        run: | 
            echo "LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0KYjNCbGJuTnphQzFyWlhrdGRqRUFBQUFBQkc1dmJtVUFBQUFFYm05dVpRQUFBQUFBQUFBQkFBQUNGd0FBQUFkemMyZ3RjbgpOaEFBQUFBd0VBQVFBQUFnRUF2V3J4NFpUODlnNUM3ckFiVFJJaEFEcldsSzBjM1pXME1vRVovaVo4ekNCbUIxdkxvUkpYClJweS9raW0zMi9NVTRhaFM3bzRHNUVIdHB1emRwRzhhZUwxb1lmQ1NxTTRmQjdBV2RPczMrbEt2Rm1uY00zSDFudXBPbXkKczd3SmNxZFRJN1VUbnE0cGNVVzNLdDNEN09WbmQ4UjV2TDAzcXNIU3pBK1F5TGl2M1dLajh5T3lrZVlMY3VUeElqN3RISwpwcGw5R3p5YmxKQmI4NDZRK3ZQem9QbmFmczhmUTU3Um1CclVxV29CNENTdjYrTG16b0V6NU9ON0wrVk5QTXNrWjcrV3pOCnUveXNseFVPMFJwR1RnV3hocUNMc0ZaUzZzV1FZL0ZyYjU0OUVJSE5lS2FHQVc5eDJvTk5hNU9yOFEyNHZjZDRRbmNkNUkKSlpXTFVNUmJ4cnhlNlNJK0grWUtFaGlmUkdhaHBYV2lYT1pZR1UrZzI2MTkyNi9OclpNYndqUGFQRHhaNC9SVXJZN2NiOQpJd1Vtb3I2OWhTMlU5RVVwSzNsTTc0TldSU3ZSQkF0SUFPVERISVhObmQ3WVV3V2N3VWgzMHh1cDczQVFiWE1uR2hkdm1TCkZMUVVtQzhCbnhpalZFWkJjUjJiMXRGMkVKSUNHQWdoeUFVQUFaM0R2M2RLek8rT1diRUxIc3hOaDJqbkp1NERxd0hVTzIKR1l0aE5QdTl2TUJZekUyUGRIcHJlOUtvam1xWHpjK0xXSmltSEdSOXFBc3AxS1FNckxEcGovSDFjV3VWbjNmWnhXUkgzMgp2SFN0RWI4VDc5d3g2U01OMGlqcm9YNHNneU15dnlKU0VES0lPQTdHYTZLNGE1STZKNHZYemtYdGhOcUxlZCtFVVFuaFhzCkVBQUFkQTBFWWpYTkJHSTF3QUFBQUhjM05vTFhKellRQUFBZ0VBdldyeDRaVDg5ZzVDN3JBYlRSSWhBRHJXbEswYzNaVzAKTW9FWi9pWjh6Q0JtQjF2TG9SSlhScHkva2ltMzIvTVU0YWhTN280RzVFSHRwdXpkcEc4YWVMMW9ZZkNTcU00ZkI3QVdkTwpzMytsS3ZGbW5jTTNIMW51cE9teXM3d0pjcWRUSTdVVG5xNHBjVVczS3QzRDdPVm5kOFI1dkwwM3FzSFN6QStReUxpdjNXCktqOHlPeWtlWUxjdVR4SWo3dEhLcHBsOUd6eWJsSkJiODQ2USt2UHpvUG5hZnM4ZlE1N1JtQnJVcVdvQjRDU3Y2K0xtem8KRXo1T043TCtWTlBNc2taNytXek51L3lzbHhVTzBScEdUZ1d4aHFDTHNGWlM2c1dRWS9GcmI1NDlFSUhOZUthR0FXOXgybwpOTmE1T3I4UTI0dmNkNFFuY2Q1SUpaV0xVTVJieHJ4ZTZTSStIK1lLRWhpZlJHYWhwWFdpWE9aWUdVK2cyNjE5MjYvTnJaCk1id2pQYVBEeFo0L1JVclk3Y2I5SXdVbW9yNjloUzJVOUVVcEszbE03NE5XUlN2UkJBdElBT1RESElYTm5kN1lVd1djd1UKaDMweHVwNzNBUWJYTW5HaGR2bVNGTFFVbUM4Qm54aWpWRVpCY1IyYjF0RjJFSklDR0FnaHlBVUFBWjNEdjNkS3pPK09XYgpFTEhzeE5oMmpuSnU0RHF3SFVPMkdZdGhOUHU5dk1CWXpFMlBkSHByZTlLb2ptcVh6YytMV0ppbUhHUjlxQXNwMUtRTXJMCkRwai9IMWNXdVZuM2ZaeFdSSDMydkhTdEViOFQ3OXd4NlNNTjBpanJvWDRzZ3lNeXZ5SlNFREtJT0E3R2E2SzRhNUk2SjQKdlh6a1h0aE5xTGVkK0VVUW5oWHNFQUFBQURBUUFCQUFBQ0FBdjM3dkt2QkZEVDA5emJHYzZEMzd2dys5QUhKRFRJR2N1NwpKcFpOZmtNenBON0FLUnl6V1Bwb094NlVMajdpbkNZcUNadHpNL0pHVENybytwUkNST3p1SXVOVlhSNzNielNBSnRzYVpiCjRXYldQQUtwN0JpNkNQODRtUWNNVVppQ0JCblVmam5malZUUDcrUHdnVW05c1F6N1NDbnAxdE9lVGFDQk4wZkhpNjAwWjIKR2NsdExyTXp2K1JWSkJvWi9YRUxiOEZCMGg3UUJFOWVhY0RCbTFwSGowdkY4SmJJT1R3Z0xlSEtoZlhRdTZEdkJHQjEvMwo1dDlVR3dmbkhoOEJueUhDZ3psbW5NMHJFbldaOEdsTHFNejE1ZjJ0WnEzWTcrZXd3SFljRElXM2ZmRXFySHI0dkx2dTRmCnh6SjBFaStkSmNBVGhKNklTZ3k5NTBDaU41NDZPRnhDeENSRXRjblpaTURkdXVYRGd1ZnMwdGozZ0V3MG5YRlJrc0dsVnYKaWZrL0U4T3dCL0JzWU1OdUFHU004VjlYd0J4WWJzeVJ6R2FmM2RpUzZGQk1pZmwvOVgxbFA3clZiSE1wSFBWUUkydzh4RQpsb3RrVDBpSWxwcHRpSHJsNk84cHIyR2RseUl3c0dNVjdDeDdSdlhwWmt5ak85ZVV4d05CeWlvYW9sYStHN2F5emtKWWdkClFOdXdJSHVwMFhHZFNzbFpLMjVyMlNjSmdEak9ta2FvTW1qMS9SVFVURDhkY1JGby8vL2kxQXZhVVNtNmtVZmZ1aDRMU28KdzR1eXFZZGNMdWZJWmhCeDY4NjNiVG4xbUNxZzI2SlpRbHoxWEg5L3BXRVBsSmY2VzJ1R29KWWZaOHRIOGRBdExpT1FhagpMUWRKNHdiZzczVWlHbEZ0QkZBQUFCQVFEU2dhRUVFV29CZTFkN2Z2bWhHdWUzVVVWN3ZieENFcWx1MlRCN2tCRUswNWkyCk5DVEF6OXNCRitIUmYwUGc4dWRZWEdnR1ZTS1BNV2VaWkY2MFZjL2JkUVB5WWVSYWQvazhacW1SVmZLTE9aYlozR1hoRXYKWmNUTHpaa3BWZlBYK2FRL1NBcThnVWZ0eTZ6TlFWZXl4bUVSRTBDeUh0VEpqZ3lLVVRIVzE3dWt0UzJtaUVIdDFwNVNpRQp0UVZ3V0ZCNnF3d0poYjVJdlVScThuMjMyN3RkRUxhbjB0TDh3WDNvTUFFWkRuTXF4WjhmdU5uTXdTT1Jtd1dhTnlrbGlMCkI1UzRtY2VhbjNaVHJjVFJzQWhxR2p6ajZwUmxGSzZQMlFnTlUvMHJtNkhIZmRLR2tTU1R6MGJ5WnpGWnkrdXJDUjBMSmMKbzlDdXRQdlFtMjZtYXNMYkFBQUJBUURvY3NyYU9hRGFLUjA1UDVJajRwY0lIUzFqdHE3SWdpcFhWcmgwMXVLTis3cW4rZgo1MmxYbmhaMCtHakpMYy8yRjhTT1ZYMU9PRURvUFE1QUVMbTBOdktidks2U0FDT1IzYXBZMktRUTBpUTFuRFFMdkRZUGdwCjhZWVNWaWQ1bkZ6K0tReUtFQytubTl3N1IwN2ltaWJEbnU2dDFNbDFyU0VEdEZWU1ZlT3ptQmVVbUw4Yk5ySGVneGNCSmcKclUyeCtvZldLTEFkMytmK2NhZnp6bTFlQkJwSVkwK0MrSzNtVVNUUnBWTnNpaWo0eDl5OGFjdG81cG1XVjBZaTYrM28rcgpXWGxmUCtXM2Y0amlyK1VKdlVLSndxM3NXQTdPdlMrRkxBVUdPam1YbkdXdm42UkpnT1Bxa1BZRUhkR1JPOUdITnZLK29DCklNMmhzT3lIRE4zemFyQUFBQkFRRFFuQWZWSVMzU3NPTWVaTSs0S0oya01MWWNaSmp2QmpyVTJIR2VQbDQxbmNaNkdUQ1kKRVNhZ0s4MC90VXZhdmY1TUFUSXhnNHJ5dGh6dGpGZWtCRm84cXdsSXhBU0ZaU3c4OTBLREJyYWFCUFB1ZmExbzUxTlA4dgpHWTRJNFZGTmJTRUFGakt2ZEdZS1RFMTcwS0xzYlVyTVo4ZytrY0xiaGF3U2E3ZXBWTm5PTmtMcEsyVE5QYWJ3VXBuTlpiCndBL1NERk1TV1AzMzN4bXp3QlhhUW11djRuZXBYVHBzNlViWFQ5NDZaMTlWTFBxT3JCRFY0cVJKQTkvYjYvYVN0aU9ZWUIKV21ZSTA5N3ByM1QvT1g4aUo5OHZlUW9YV2hQT2FvMmZTZHVmeVVza0lGWDRic1RGWU84cGExdUJVbXZ4dnZJUjhldkkvTwpXNG5oaXdvaW9qQkRBQUFBQ1dac1lYTnJYMkZ3Y0FFPQotLS0tLUVORCBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K" > private_key && chmod 600 private_key
            ssh -o StrictHostKeyChecking=no -i private_key ${USER_NAME}@${HOST_NAME} "
            echo 'WE CAN LOGIN AND RUN THE SCRIPT' > /home/ubuntu/MessageFromActions.txt
            "

